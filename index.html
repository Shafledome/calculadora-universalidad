<!DOCTYPE html>
<html>
    <head>
        <title>Calculadora Universalidad - TALF</title>
        <script>
            // funcion cantorizacion tamanyo dos
            // N^2 -> N
            function cantorizacionTam2()
            {
                var x = parseInt(document.cantorizacionTam2.x.value); 
                var y = parseInt(document.cantorizacionTam2.y.value);
                if (x < 0 || y < 0) {
                    alert("Error. \nX e Y deben de ser igual o mayores que 0.")
                } else {
                    document.cantorizacionTam2.cantorizacionTam2Result.value = cantorizacionTam2Return(x,y);
                }
            }
            // funcion cantorizacion tamanyo dos con return
            function cantorizacionTam2Return(x,y)
            {
                return (x+y)*(x+y+1)/2+y;
            }
            // funcion cantorizacion generalizada
            // N^(k+1) -> N
            function cantorizacionG()
            {
                var numbers = document.cantorizacionGeneral.numeros.value.split(/[;]/);
                numbers = leeArray(numbers);
                var result = cantorizacionGRec(numbers);
                if (Number.isInteger(result)) {
                    document.cantorizacionGeneral.cantorizacionGResult.value = result;
                } else {
                    alert("Error. \nCompruebe la expresion introducida en la caja de texto y vuelva a intentarlo.");
                }
                
            }
            function leeArray(array) {
                var result = [];
                for (i = 0; i < array.length; i++) {
                    var v = parseInt(array[i]);
                    if (v < 0) {
                        alert("Los numeros introducidos deben de ser naturales.");
                    }
                    result[i] = v;
                }
                return result;
            }
            // funcion cantorizacion generalizada recursiva
            function cantorizacionGRec(nums)
            {
                if (nums.length == 2) {
                    return cantorizacionTam2Return(nums[0],nums[1]);
                } else {
                    var n0 = nums[0];
                    nums.shift();
                    return cantorizacionTam2Return(n0,cantorizacionGRec(nums));
                }
            }
            // funcion decantorizacion tamanyo dos
            // N -> N
            function decantorizacionTam2()
            {
                var numero = parseInt(document.decantorizacionTam2.n.value);
                if (numero < 0) {
                    alert("Error. \nEl numero tiene que ser mayor o igual que 0.")
                } else {
                    document.decantorizacionTam2.decantorizacionTam2Result.value = decantorizacionTam2Return(numero);
                }
            }
            // funcion decantorizacion tamanyo dos con return
            function decantorizacionTam2Return(n)
            {
                return "(" + decantorizacionTam2PrimComp(n) + "," + decantorizacionTam2SegComp(n) + ")";
            }
            // funcion decantorizacion tamanyo 2 primera componente
            function decantorizacionTam2PrimComp(n)
            {
                return diagonal(n) - decantorizacionTam2SegComp(n);
            }
            // funcion decantorizacion tamanyo 2 segunda componente
            function decantorizacionTam2SegComp(n)
            {
                return n - cantorizacionTam2Return(diagonal(n),0);
            }
            // funcion diagonal o d(z) siendo z nuestro numero
            // calculado aritmeticamente
            function diagonal(n)
            {
                return Math.trunc((Math.sqrt(8*n+1)-1)/2);
            }
            // funcion decantorizacion generalizada
            // N -> N
            function decantorizacionG()
            {
                var n = parseInt(document.decantorizacionGeneral.n.value);
                var kp1 = parseInt(document.decantorizacionGeneral.k.value)+1;
                if (n < 0 || kp1 < 0) {
                    alert("Error. \nEl numero y k tienen que ser mayor o igual que 0.")
                } else {
                    var result = decantorizacionGReturn(n,kp1);
                    document.decantorizacionGeneral.decantorizacionGResult.value = result.join('');
                }
            }
            // funcion decantorizacion generalizada return
            function decantorizacionGReturn(n,kp1)
            {
                var result = [];
                result.unshift(")");
                for (var i = kp1; i >= 1; i--) {
                    result.unshift(decantorizacionGRec(n,kp1,i));
                    result.unshift(",");
                }
                result.shift();
                result.unshift("(");
                return result;
            }
            // funcion decantorizacion generalizada recursiva
            function decantorizacionGRec(n,kp1,i)
            {
                if (kp1 == 1) {
                    return n;
                } else if (i == 1) {
                    return decantorizacionTam2PrimComp(n);
                } else {
                    return decantorizacionGRec(decantorizacionTam2SegComp(n),kp1-1,i-1)
                }
            }
            // funcion L(x) -> anexo 3 de godel es array.length
            // funcion godelizacion
            // N^* -> N
            function godelizacion()
            {
                var result = 0;
                var numbers = document.codificacionGodel.numeros.value.split(/[;]/);
                numbers = leeArray(numbers);
                if (numbers.length != 0) {
                    result = cantorizacionTam2Return(numbers.length-1,cantorizacionGRec(numbers))+1;
                }
                document.codificacionGodel.codificacionGodelResult.value = result;
            }
            // funcion longitud (dado un z)
            function longitud(z)
            {
                if (z == 0) {
                    return 0;
                } else {
                    return decantorizacionTam2PrimComp(z-1)+1;
                }
            }
            // funcion degodelizacion
            // N^2 -> N
            function degodelizacion()
            {
                var z = document.decodificacionGodel.n.value;
                var result = [];
                result.unshift(")");
                for (var k = longitud(z); k >= 1; k--) {
                    result.unshift(degodelizacionReturn(z,k));
                    result.unshift(",");
                }
                result.shift();
                result.unshift("(");
                document.decodificacionGodel.decodificacionGodelResult.value = result.join('');
            }
            // funcion degodelizacion con return
            function degodelizacionReturn(z,k)
            {
                if (z == 0 || k > longitud(z)) {
                    return 0;
                } else {
                    return decantorizacionGRec(decantorizacionTam2SegComp(z-1),longitud(z),k);
                }
            }
            // funcion codi de codificacion de sentencias while
            // Cod_While -> N
            function codi()
            {
                var arrayLinea = tratarLinea(document.codificacionSentenciasWhile.sentencia.value);
                var result = codiReturn(arrayLinea);
                if (Number.isInteger(result)) {
                    document.codificacionSentenciasWhile.codificacionSentenciasWhileResult.value = result;
                } else {
                    alert("Error. \nCompruebe la expresion introducida en la caja de texto y vuelva a intentarlo.");
                }
                
            }
            // funcion codi con return
            function codiReturn(arrayLinea)
            {
                if (arrayLinea.length == 6) {
                    return 5*(arrayLinea[1]-1);
                } else if (arrayLinea.length == 7) {
                    return 5*cantorizacionTam2Return(arrayLinea[1]-1,arrayLinea[5]-1)+1;
                } else if (arrayLinea.length == 9 && arrayLinea[6] == '+') {
                    return 5*cantorizacionTam2Return(arrayLinea[1]-1,arrayLinea[5]-1)+2;
                } else if (arrayLinea.length == 9 && arrayLinea[6] == '-') {
                    return 5*cantorizacionTam2Return(arrayLinea[1]-1,arrayLinea[5]-1)+3;
                } else {
                    return 5*cantorizacionTam2Return(arrayLinea[6]-1,CodiReturn(arrayLinea.slice(12,arrayLinea.length-2)))+4
                }
            }
            // funcion separar sentencia while
            function tratarLinea(linea)
            {
                return linea.replace(/[\s]/g,'').split('');
            }
            // funcion Codi con return
            function CodiReturn(arrayLineas)
            {
                var lineas = separarSentencias(arrayLineas);
                var result = 0;
                lineas.forEach(element => {
                    result += codiReturn(tratarLinea(element));
                });
                return result;
            }
            function separarSentencias(arrayLineas)
            {
                var result = arrayLineas.join('').replace(/;/gi, ";,").split(/\,/);
                result.pop(); // eliminamos el ultimo elemento generado por el ultimo ;
                return result;
            }
        </script>
    </head>
    <body>
        <div class="scroll" style="overflow-y: auto;">
            <center><h1>Calculadora Universalidad</h1></center>
            <center><h2 style="font-weight:normal">Teor&iacute;a de Aut&oacute;matas y Lenguajes Formales</h2></center>
            <center><h3 style="font-weight:normal"><i>Seraf&iacute;n Cort&eacute;s Ram&iacute;rez - Universidad de M&aacute;laga - Enero 2020</i></h3></center>
            <br>
            <br>
            <center>
                <form name="cantorizacionTam2">
                    <h2>
                        Codificaci&oacute;n de Cantor de tama&ntilde;o dos o <i>cantorizaci&oacute;n de tama&ntilde;o dos</i>, 
                        &sigma;
                        <span class="supsub" style="position: absolute;">
                            <sup class="superscript" style="display: block; position: relative; left: 2px; font-size: 13px">2</sup>
                            <sub class="subscript" style="display: block; position: relative; left: 2px; font-size: 13px;">1</sub>
                        </span>
                    </h2>
                    <h3 style="font-weight: normal">Introduce un n&uacute;mero X y un n&uacute;mero Y, ambos mayores o iguales que 0</h3>
                    X:&nbsp;&nbsp;<input type="text" size="8" name="x">&nbsp;&nbsp;&nbsp;
                    Y:&nbsp;&nbsp;<input type="text" size="8" name="y">
                    <br>
                    <br>
                    <input type="button" value="Calcular" onclick="cantorizacionTam2()">
                    <br>
                    <br>
                    Resultado:&nbsp;&nbsp;<input type="text" size="8" name="cantorizacionTam2Result" readonly>
                </form>
                <br>
                <br>
                <form name="cantorizacionGeneral">
                    <h2>
                        Codificaci&oacute;n de Cantor Generalizada o <i>cantorizaci&oacute;n</i>, 
                        &sigma;
                        <span class="supsub" style="position: absolute;">
                            <sup class="superscript" style="display: block; position: relative; left: 2px; font-size: 13px">k+1</sup>
                            <sub class="subscript" style="display: block; position: relative; left: 2px; font-size: 13px;">1</sub>
                        </span>
                    </h2>
                    <h3 style="font-weight: normal">Introduce todos los valores iguales o mayores que 0 deseados separados por ; y sin espacios</h3>
                    <i><b>Ejemplo: </b>1;2;3;4</i>
                    <br>
                    <br>
                    <textarea name ="numeros" rows="4" cols="50"></textarea>
                    <br>
                    <br>
                    <input type="button" value="Calcular" onclick="cantorizacionG()">
                    <br>
                    <br>
                    Resultado:&nbsp;&nbsp;<input type="text" size="8" name="cantorizacionGResult" readonly>
                </form>
                <br>
                <br>
                <form name="decantorizacionTam2">
                    <h2>
                        Decodificaci&oacute;n de Cantor de tama&ntilde;o dos o <i>decantorizaci&oacute;n de tama&ntilde;o dos</i>, 
                        (&sigma;
                        <span class="supsub" style="position: absolute;">
                            <sup class="superscript" style="display: block; position: relative; left: 2px; font-size: 13px">1</sup>
                            <sub class="subscript" style="display: block; position: relative; left: 2px; font-size: 13px;">2,1</sub>
                        </span>&nbsp;&nbsp;,
                        &sigma; 
                        <span class="supsub" style="position: absolute;">
                            <sup class="superscript" style="display: block; position: relative; left: 2px; font-size: 13px">1</sup>
                            <sub class="subscript" style="display: block; position: relative; left: 2px; font-size: 13px;">2,2</sub>
                        </span>&nbsp;&nbsp;)
                    </h2>
                    <h3 style="font-weight: normal;">Introduce un n&uacute;mero mayor o igual que 0</h3>
                    N&uacute;mero:&nbsp;&nbsp;<input type="text" size="8" name="n">
                    <br>
                    <br>
                    <input type="button" value="Calcular" onclick="decantorizacionTam2()">
                    <br>
                    <br>
                    Resultado:&nbsp;&nbsp;<input type="text" size="8" name="decantorizacionTam2Result" readonly>
                </form>
                <br>
                <br>
                <form name="decantorizacionGeneral">
                    <h2>
                        Decodificaci&oacute;n de Cantor Generalizada o <i>decantorizaci&oacute;n</i>, 
                        (&sigma;
                        <span class="supsub" style="position: absolute;">
                            <sup class="superscript" style="display: block; position: relative; left: 2px; font-size: 13px">1</sup>
                            <sub class="subscript" style="display: block; position: relative; left: 2px; font-size: 13px;">k+1,i</sub>
                        </span>&nbsp;&nbsp;&nbsp;, . . . , 
                        &sigma;
                        <span class="supsub" style="position: absolute;">
                            <sup class="superscript" style="display: block; position: relative; left: 2px; font-size: 13px">1</sup>
                            <sub class="subscript" style="display: block; position: relative; left: 2px; font-size: 13px;">k+1,k+1</sub>
                        </span>&nbsp;&nbsp;&nbsp;&nbsp;)
                    </h2>
                    <h3 style="font-weight: normal;">Introduce un n&uacute;mero mayor o igual que 0, y el valor de k tambi&eacute;n mayor que 0</h3>
                    <i style="font-size: 18px">
                        Recuerda que para k = 2 y i=1, la expresi&oacute;n quedar&iacute;a como:
                        &sigma;
                        <span class="supsub" style="position: absolute;">
                            <sup class="superscript" style="display: block; position: relative; left: 2px; top: -2px; font-size: 11px">1</sup>
                            <sub class="subscript" style="display: block; position: relative; left: 2px; top: -2px; font-size: 11px;">3,1</sub>
                        </span>
                    </i>
                    <br>
                    <br>
                    N&uacute;mero:&nbsp;&nbsp;<input type="text" size="8" name="n">&nbsp;&nbsp;&nbsp;
                    k:&nbsp;&nbsp;<input type="text" size="8" name="k">
                    <br>
                    <br>
                    <input type="button" value="Calcular" onclick="decantorizacionG()">
                    <br>
                    <br>
                    Resultado:&nbsp;&nbsp;<input type="text" size="8" name="decantorizacionGResult" readonly>
                </form>
                <br>
                <br>
                <form name="codificacionGodel">
                    <h2>
                        Codificaci&oacute;n de G&ouml;del o <i>g&ouml;delizaci&oacute;n</i>, <i>god</i>
                    </h2>
                    <h3 style="font-weight: normal">Introduce todos los valores iguales o mayores que 0 deseados separados por ; y sin espacios</h3>
                    <i><b>Ejemplo: </b>1;2;3;4</i>
                    <br>
                    <br>
                    <textarea name ="numeros" rows="4" cols="50"></textarea>
                    <br>
                    <br>
                    <input type="button" value="Calcular" onclick="godelizacion()">
                    <br>
                    <br>
                    Resultado:&nbsp;&nbsp;<input type="text" size="8" name="codificacionGodelResult" readonly>
                </form>
                <br>
                <br>
                <form name="decodificacionGodel">
                    <h2>
                        Decodificaci&oacute;n de G&ouml;del o <i>deg&ouml;delizaci&oacute;n</i>, <i>degod</i>
                    </h2>
                    <h3 style="font-weight: normal;">Introduce un n&uacute;mero mayor o igual que 0 <i>(devuelve las k componentes en un vector)</i></h3>
                    N&uacute;mero:&nbsp;&nbsp;<input type="text" size="8" name="n">
                    <br>
                    <br>
                    <input type="button" value="Calcular" onclick="degodelizacion()">
                    <br>
                    <br>
                    Resultado:&nbsp;&nbsp;<input type="text" size="8" name="decodificacionGodelResult" readonly>
                </form>
                <br>
                <br>
                <form name="codificacionSentenciasWhile">
                    <h2>
                        Codificaci&oacute;n de sentencias While o <i>codi</i>
                    </h2>
                    <h3 style="font-weight: normal;">Introduzca la sentencia While a codificar<b> e introduzca ; al final de cada sentencia</b></h3>
                    <p>Recuerda, las sentencias posibles son:</p>
                    <ul>
                        <li>Xi:= 0;</li>
                        <li>Xi:= Xj;</li>
                        <li>Xi:= Xj+1;</li>
                        <li>Xi:= Xj-1;</li>
                        <li>while Xi != 0 do S1 od</li>
                    </ul>
                    <p>Donde debes sustituir i y j por el indice de la variable (y S1 siendo el c&oacute;digo dentro del bucle)</p>
                    Sentencia o bucle While:
                    <br>
                    <br>
                    <textarea name="sentencia" rows="4" cols="50"></textarea>
                    <br>
                    <br>
                    <input type="button" value="Calcular" onclick="codi()">
                    <br>
                    <br>
                    Resultado:&nbsp;&nbsp;<input type="text" size="8" name="codificacionSentenciasWhileResult" readonly>
                </form>
                <br>
                <br>
            </center>
        </div>
    </body>
</html>